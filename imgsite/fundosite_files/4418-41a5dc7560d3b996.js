!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=(new e.Error).stack;o&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[o]="27e09cc5-fadb-478d-96e0-8db88ab9a3ba",e._sentryDebugIdIdentifier="sentry-dbid-27e09cc5-fadb-478d-96e0-8db88ab9a3ba")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4418],{64979:function(e,o,t){t.d(o,{C0:function(){return r},H$:function(){return c},Iu:function(){return _},Kq:function(){return s},OI:function(){return l},PF:function(){return w},RJ:function(){return p},Zq:function(){return b},_R:function(){return h},cm:function(){return f},e5:function(){return i},os:function(){return d},p3:function(){return a},u4:function(){return n},vl:function(){return m},wK:function(){return u},wj:function(){return v},xQ:function(){return g}});let a="edit_after_removing_bg",r="ai_tool_all",n="ai_tool_all_thumbnail",l="ai_tool_expand_carousel",i="ai_tool_expand_download_popover",_="ai_tool_expand_removebg",u="ai_tool_reimagine_download_popover",d="ai_tool_removebg",s="ai_tool_retouch_download_popover",c="ai_tool_upscaler",w="copy_after_removing_bg",f="download_after_removing_bg",p="edit_tools_onboarding_v2",m="edit_tools_onboarding",g=["replacebg","video","generatePrompt","styleReference"],b=["tint","grain","presets"],h=2e3,v=15},58984:function(e,o,t){t.d(o,{I:function(){return m}});var a=t(65122),r=t(69762),n=t(43186),l=t(52983),i=t(33961),_=t(51986);let u=(e,o)=>{let t=d(e,o),a=s(e);if(!t)throw Error("There are no download parameters for ".concat(e.name," in ").concat(o));return{action:t,modifier:a}},d=(e,o)=>{var t;let a=null===(t=c[e.name])||void 0===t?void 0:t[o];if(!a)throw Error("There are no download parameters for ".concat(e.name," in ").concat(o));return a},s=e=>{if("workflow"===e.name){let o=w[e.subOption];if(!o)throw Error("There are no download parameters for workflow with ".concat(e.subOption));return o}},c={retouch:{detail:"ai_tool_retouch",postDownload:"ai_tool_retouch_after_download"},expand:{detail:"ai_tool_expand",postDownload:"ai_tool_expand_after_download"},reimagine:{detail:"ai_tool_reimagine",postDownload:"ai_tool_reimagine_after_download"},adjust:{detail:"ai_tool_adjust",postDownload:"ai_tool_adjust_after_download",thumbnail:"ai_tool_adjust_thumbnail"},replacebg:{detail:"ai_tool_replacebg"},video:{detail:"ai_tool_video",postDownload:"ai_tool_video_after_download"},assistant:{detail:"ai_tool_assistant",thumbnail:"ai_tool_assistant_thumbnail"},generatePrompt:{detail:"ai_tool_generate_prompt"},styleReference:{detail:"ai_tool_generate_style_ref",postDownload:"ai_tool_generate_style_ref_after_download"},workflow:{detail:"ai_tool_assistant"},imageEditor:{thumbnail:"ai_tool_all_thumbnail",detail:"ai_tool_all"}},w={createSocialPost:"workflow_create_post",createPoster:"workflow_create_poster",mixImages:"workflow_mix_images",applyPromo:"workflow_apply_promo",createFlyer:"workflow_create_flyer",createLogoVariations:"workflow_create_logo_variations",localize:"workflow_localize",createLogo:"workflow_create_logo",applyColors:"workflow_apply_colors",replaceText:"workflow_replace_text",removeText:"workflow_remove_text",replaceElement:"workflow_replace_element",addElement:"workflow_add_element"};var f=t(75045);let p=e=>{let{tool:o,location:t,imageSrc:a,resource:r}=e,{id:d,name:s,author:c,premium:w,type:p,isAIGenerated:m,preview:g,url:b}=r,{action:h,modifier:v}=u(o,t),k=(0,_.M)({tool:o,resource:{type:p,subtype:p,authorName:c.name,isPremium:w,isAIGenerated:m}}),{handleDownload:y}=(0,f.i)({resource:{id:d,name:s,author:c,premium:w,regularType:p,isAIGenerated:m,url:b,preview:g,type:p},action:h,modifier:v,showAttributionModal:!1,skipDownloadTracker:!0,location:(0,i.d)({isResourcePremium:w,tool:o,location:t}),checkoutQueryParams:k}),x=(0,n.J)(),T=null!=a?a:g.url;return(0,l.useCallback)(async()=>{let e=await y(T);if(!(null==e?void 0:e.signedUrl))throw Error("Failed to download image");return x(),"".concat(e.signedUrl,"&w=2000&h=2000")},[T,y,x])},m=e=>{let{tool:o,location:t,imageSrc:n,extraParams:l,resource:i}=e,{id:_,premium:u,isAIGenerated:d,type:s,author:{name:c},name:w,preview:{url:f,width:m,height:g}}=i,b=(0,a.e)(),h=p({tool:o,location:t,imageSrc:n,resource:i});return(0,r.F)({tool:o,resource:{id:_,name:w,type:s,authorName:c,isPremium:u,isAIGenerated:d,groupedType:"regular",media:{url:f,width:m,height:g}},canDownloadResource:b||!u,imageSrc:n,getSignedResource:h,location:t,extraParams:l})}},15715:function(e,o,t){t.d(o,{H:function(){return r}});let a=e=>{let{resource:o,file:t,option:a,size:r,action:n,walletId:l,locale:i,modifier:_}=e,u=new URLSearchParams;return u.set("resource","".concat(o)),t&&a?(u.set("file",t),u.set("option","".concat(a))):r&&u.set("size","".concat(r)),n&&u.set("action",n),l&&u.set("walletId",l),u.set("locale",i),_&&u.set("modifier",_),u.toString()},r=async e=>{let o=a(e),t=await fetch("/api/regular/download?".concat(o));return t.ok?{success:!0,data:await t.json()}:429===t.status?{success:!1,data:"DOWNLOAD_LIMIT_REACHED",metadata:"/download-limit"}:401===t.status||403===t.status||405===t.status?{success:!1,data:"AUTHENTICATION_ERROR"}:404===t.status?{success:!1,data:"NOT_FOUND"}:{success:!1,data:"UNKNOWN_ERROR"}}},75045:function(e,o,t){t.d(o,{i:function(){return E}});var a=t(72234),r=t(15880),n=t(68147),l=t(85229),i=t(87420),_=t(59608),u=t(52983),d=t(9036),s=t(35576),c=t(7526);let w=(e,o)=>o||("photo"===e?"jpg":"zip");var f=t(24278);t(97458);let p=(0,u.createContext)(null),m=()=>(0,u.useContext)(p)||{shouldTrackingLog:!0};var g=t(15715),b=t(32509),h=t(72661),v=t(72118),k=t(1850),y=t(64979),x=t(56879);let T=k.z.enum(["download","copy","edit","prompt","preview","remove_background","remove_background_edit","ai_video",y.cm,y.PF,y.p3,y.Kq,y.wK,y.os,y.H$,y.C0,y.u4,y.OI,y.Iu,y.e5,"ai_tool_retouch","ai_tool_retouch_after_download","ai_tool_expand","ai_tool_expand_after_download","ai_tool_reimagine","ai_tool_reimagine_after_download","ai_tool_adjust","ai_tool_adjust_after_download","ai_tool_replacebg","ai_tool_video","ai_tool_video_after_download","ai_tool_assistant","ai_tool_generate_prompt","ai_tool_generate_style_ref","ai_tool_generate_style_ref_after_download","ai_tool_adjust_thumbnail","ai_tool_assistant_thumbnail","ai_tool_all_thumbnail","ai_tool_all"]),I=k.z.enum(["workflow_create_post","workflow_create_poster","workflow_mix_images","workflow_apply_promo","workflow_create_flyer","workflow_create_logo_variations","workflow_localize","workflow_create_logo","workflow_apply_colors","workflow_replace_text","workflow_remove_text","workflow_replace_element","workflow_add_element"]);k.z.object({resource:k.z.coerce.number(),file:x.ru.optional(),option:k.z.coerce.number().optional(),size:k.z.coerce.number().optional(),action:T.optional(),modifier:I.optional(),walletId:k.z.string().nullable().optional(),locale:k.z.string()}),k.z.object({data:k.z.object({filename:k.z.string(),url:k.z.string(),prompt:k.z.string().optional(),signed_url:k.z.string().optional()})}).transform(e=>{let{data:o}=e;return o}).transform(e=>{let{signed_url:o,...t}=e;return{...t,signedUrl:o}});let z=k.z.array(k.z.string()),D=new Date(new Date().getTime()+48e4),N=v.Z.withConverter({write:e=>e}),R=e=>{try{let o=N.get(e);if(!o)return[];return z.parse(JSON.parse(o))}catch(e){return[]}},O=()=>{let e=(0,n.I)(),o=(0,h.b)();return(0,u.useCallback)(t=>{if(!e)return;let a="".concat("ck_items_").concat(e),r=R(a),n="".concat(t);if(!r.includes(n)){let e=JSON.stringify([...r,n]);N.set(a,e,{path:"/",domain:o,expires:D})}},[e,o])},E=e=>{let{resource:o,file:t,action:p="download",modifier:h,location:v="resource_detail",option:k,size:y,showAttributionModal:x=!0,handleError:T,checkoutQueryParams:I,skipDownloadTracker:z=!1}=e,{id:D,name:N,author:R,premium:E,regularType:C,isAIGenerated:j,url:U,type:A}=o,[P,H]=(0,u.useState)(!1),{isUserWinback:L,showWinbackModal:F}=(0,l.l)(),{showAttribution:K}=(0,f.tc)(),S=O(),W=(0,b.b)({resource:o,location:v}),M=(0,s.mS)(),{shouldTrackingLog:J}=m(),{showDeviceBlockedModal:q,isDeviceBlocked:Z}=(0,r.qx)(),G=(0,a.Lh)(),$=(0,n.I)(),B=(0,i.ZK)(),Q=(0,d.TH)({file_extension:w(C,t),file_name:N,file_id:D,license:E?"premium":"free",resolution:y?c.w8[y]:"original",style:"na",author_name:R.name,category:j?"ai_image":C,action:"prompt"===p?"view_prompt":p,location:v,url_link:U}),V=(0,u.useCallback)(e=>{if(T){T(e);return}"prompt"!==p&&W(e,I)},[T,p,W,I]);return{handleDownload:(0,u.useCallback)(async(e,o)=>{if(Z){q();return}if(L){F();return}H(!0),G||_.uT("WARNING: User ".concat($," has no wallet_id"),"warning"),J&&!z&&M({resourceId:D,isResourcePremium:E,resourceType:A,downloadType:p,fileType:A,variant:v});let a=await (0,g.H)({resource:D,size:y?2e3:void 0,action:p,modifier:h,file:t,option:k,walletId:G,locale:B});if(a.success)return x&&K&&K(),H(!1),S(D),Q({externalUrl:null!=e?e:U,setting:o}),a.data;V(a),H(!1)},[Z,L,G,J,z,D,y,p,h,t,k,B,V,q,F,$,M,E,A,v,x,K,S,Q,U]),isDownloading:P}}},32509:function(e,o,t){t.d(o,{b:function(){return i}});var a=t(17842),r=t(10893),n=t(52983),l=t(65724);let i=e=>{var o;let{location:t,resource:i}=null!=e?e:{},{t:_}=(0,r.$G)("error"),{openToast:u}=(0,a.x_)(),d=(0,l.W)(null!==(o=null==i?void 0:i.id)&&void 0!==o?o:0,"",t);return(0,n.useCallback)((e,o)=>{if("DOWNLOAD_LIMIT_REACHED"===e.data&&i){d({resourceData:{name:i.name,mediaUrl:i.preview.url,mediaWidth:i.preview.width,mediaHeight:i.preview.height,resourceType:"regular"},checkoutQueryParams:o,modalType:"downloadLimit",origin:"download_limit"});return}if("AUTHENTICATION_ERROR"===e.data){window.location.href="/oauth-logout";return}"NOT_FOUND"===e.data&&u({type:"danger",message:_("notFound")}),"UNKNOWN_ERROR"===e.data&&u({type:"danger",message:_("unknown")})},[d,u,i,_])}},64237:function(e,o,t){t.d(o,{y:function(){return r}});var a=t(5704);let r=e=>{let{isEditableInMockup:o,isEditableInWepik:t}=e,r=(0,a.Jn)("type");return"illustration"===r?"illustration":o||"mockup"===r?"mockup":t||"template"===r?"template":void 0}},30061:function(e,o,t){var a=t(97458);o.Z=e=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 512 512","aria-hidden":!0,...e,children:(0,a.jsx)("path",{d:"M197.008 280.484c-46.405 3.462-105.764 12.088-105.277 28.341.514 17.01 44.242 49.677 101.707 70.96 2.678-34.804 3.327-71.69 3.597-99.274zM27.099 105.248C11.82 105.707.273 99.028.002 89.698c-.216-6.814 14.739-28.124 23.825-31.586 6.247-2.352 36.562-13.845 87.104-15.36 18.741-.568 50.543 1.73 77.396 5.733C344.688 71.661 508.81 190.892 511.947 296.63c2.136 71.96-60.008 139.431-181.348 143.055-31.965.947-61.712-2.975-88.754-10.087-.595 17.659.73 27.016-24.312 27.746-15.333.46-21.282-24.365-23.554-44.539-73.231-32.506-117.365-85.293-117.987-106.143-.92-31.018 55.492-56.897 121.476-67.147.919-25.69 5.273-91.106 18.848-91.485 5.436-.162 16.74 12.467 20.986 31.802 3.867 17.578 4.272 49.624 4.326 55.33l4.976-.19c92.594-2.758 148.059 26.205 149.086 60.495.785 26.583-22.742 40.185-35.101 40.564s-26.799-6.653-26.934-10.466c-.217-7.328 26.339-9.032 25.988-20.85-.541-17.848-74.151-25.663-119.502-25.934-.081 15.361-.27 33.939.108 46.406.352 11.979 1.109 42.943 1.461 68.769 20.579 4.354 41.753 6.707 62.549 6.085 48.893-1.461 160.579-19.282 158.092-103.195-3.408-117.284-235.19-224.968-359.316-221.29-48.893 1.46-78.235 6.706-78.1 11.493.082 3.191 23.798 4.435 24.015 10.763.189 6.328-13.468 7.193-21.824 7.437z"})})}}]);